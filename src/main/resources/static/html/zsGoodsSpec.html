<!DOCTYPE html>
<html>


<!-- Mirrored from www.zi-han.net/theme/hplus/table_jqgrid.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 20 Jan 2016 14:20:02 GMT -->
<head>
  <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <title></title>

    <link rel="shortcut icon" href="favicon.ico">
    <link href="../hplus/css/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
    <link href="../hplus/css/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">

    <!-- jqgrid-->
    <link href="../hplus/css/plugins/jqgrid/ui.jqgridffe4.css?0820" rel="stylesheet">

    <link href="../hplus/css/animate.min.css" rel="stylesheet">
    <link href="../hplus/css/style.min862f.css?v=4.1.0" rel="stylesheet">
    
      

    <link href="../hplus/css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="../hplus/css/plugins/chosen/chosen.css" rel="stylesheet">
    <link href="../hplus/css/plugins/colorpicker/css/bootstrap-colorpicker.min.css" rel="stylesheet">
    <link href="../hplus/css/plugins/cropper/cropper.min.css" rel="stylesheet">
    <link href="../hplus/css/plugins/switchery/switchery.css" rel="stylesheet">
    <link href="../hplus/css/plugins/jasny/jasny-bootstrap.min.css" rel="stylesheet">
    <link href="../hplus/css/plugins/nouslider/jquery.nouislider.css" rel="stylesheet">
    <link href="../hplus/css/plugins/datapicker/datepicker3.css" rel="stylesheet">
    <link href="../hplus/css/plugins/ionRangeSlider/ion.rangeSlider.css" rel="stylesheet">
    <link href="../hplus/css/plugins/ionRangeSlider/ion.rangeSlider.skinFlat.css" rel="stylesheet">
    <link href="../hplus/css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css" rel="stylesheet">
    <link href="../hplus/css/plugins/clockpicker/clockpicker.css" rel="stylesheet">
    <link href="../hplus/css/animate.min.css" rel="stylesheet">
    
    
    
	
	<script src="../hplus/js/jquery.min.js?v=2.1.4"></script>
    <script src="../hplus/js/bootstrap.min.js?v=3.3.6"></script>
    <script src="../hplus/js/plugins/peity/jquery.peity.min.js"></script>
    <script src="../hplus/js/plugins/jqgrid/i18n/grid.locale-cnffe4.js?0820"></script>
    <script src="../hplus/js/plugins/jqgrid/jquery.jqGrid.minffe4.js?0820"></script>
    <script src="../hplus/js/content.min.js?v=1.0.0"></script>
   <script src="../layer-v3.1.1/layer/layer.js"></script>
 
<script src="../js/common2.js"></script>
<link rel="stylesheet" href="../css/common.css">


 <!-- <link rel="stylesheet" href="../amaze/chosen/docsupport/style.css">
  <link rel="stylesheet" href="../amaze/chosen/docsupport/prism.css">
  <link rel="stylesheet" href="../amaze/chosen/css/chosen.css"> -->

    
    <style>
        /* Additional style to fix warning dialog position */
        #xiangqing{display:block;padding:3px;margin-right:5px; background:#44BB5C;width:80px}
        #alertmod_table_list_2 {
            top: 900px !important;
        }
     
        .ui-jqgrid td input, .ui-jqgrid td select, .ui-jqgrid td textarea {
          margin-left: -4px;
                  /* padding-right: 5px; */
         }
        .ui-jqgrid {
            font-size: 18px;
        }
        img {
		    border: 0;
		    margin-left: -5px;
		}
         .ui-jqgrid tr.ui-row-ltr td {
            /* text-align: center; */
            font-size: 14px;
            font-weight:500;
        } 
      
    </style>

</head>

<body class="fixed-sidebar full-height-layout gray-bg fixed-nav" style="overflow-x:hidden;">

<div style="padding: 10px;">
    

<div class="ibox">
   <!--  <div class="wrapper wrapper-content  animated fadeInRight"  id="bigBody"> -->
			    <div class="ibox-content">
			        <div class="row">
				           <div class="col-xs-3">
				               <a href="javascript:;" url="zsGoodsSpecEdit.html" data-title="添加" onclick="layer_open(this,1)" class="btn btn-sm btn-primary">添加</a>
				           </div>
				           <div class="col-xs-9" style="text-align: right;">
			                 <form class="form-inline" id="form-search" action="/goods/getGoodsList">
		                        <div class="input-group" style="text-align: left;">
			                         <select class="chosen-select" name="goodsId" id="goodsId"   data-placeholder="请选择商品"     style="width: 150px">
									    <option label='请选择商品'></option>
									    
									</select>
			                    </div>
			                     <div class="form-group">
		                            <div class="input-group" style="text-align: left;">
		                                <select  class="form-control"  name="goodsCateId" id="goodsCateId" style="width: 150px;">
		                                
		                                </select>
		                            </div>
		                        </div>
			                    <div class="input-group">
			                        <span class="input-group-btn">
			                            <button class="btn-sm btn-primary" type="button" id ="search-btn" ><i class="fa fa-search"></i></button>
			                        </span>
			                        <span class="input-group-btn">
			                            <button class="btn-sm btn-primary " type="button" id="search-clear"><i class="fa fa-undo"></i></button>
			                        </span>
			                    </div>
			                    
								
			                 </form>
                         </div>
			         </div>
            
                </div>
        <div class="ibox-content">
          <div class="ibox ">
                 <div class="jqGrid_wrapper">
                     <table id="table"></table>
                     <div id="pager_list_1"></div>
                 </div>
              </div>
          </div>
      </div>
      </div>
   <!--  </div> -->
   <script src="../js/pathjs.js"></script>
    <script>
        $(document).ready(function(){
      /*   $(".summernote").summernote({lang:"zh-CN"}); */
        
		$.jgrid.defaults.styleUI="Bootstrap";
	
		 $("#table").jqGrid({
	           url:_getGoodsSpecList,
		//data:mydata,
		       datatype:"json",
				height:"auto",
				autowidth:true,
				shrinkToFit:true,
				rowNum:5,
				sortname: 'id',
				rowList:[10,20,30],
				colNames:["ID","名称","规格数据","分类","操作"],
				colModel:[
					{name:"id",index:"id",editable:true,width:25,sorttype:"int",search:true},
					{name:'attrName', index: 'attrName', width: 60, sortable: false, editable: false },
				    {name:"skuValue",index:"skuValue",editable:true,width:60},
					{name:"catName",index:"catName",editable:true,width:80},
					{width:80,sortable: false,align:'left',formatter: function (a, b, c) {
						var editurl='zsGoodsAdd.html'+'?id='+c.id;
					    var btn = '<a url="'+editurl+'" href="javascript:;" data-title="编辑商品" onclick="layer_open(this,1)"><span class="label label-info" title="编辑">编辑</span></a>&nbsp;';
						// var btn = '<a href="?id='+c.id+'&name='+c.loginiNo+'&groupId='+c.groupId+'&url=admin_list.html"><span class="label label-info" title="编辑">编辑</span></a>&nbsp;';
		                    btn += '<a href="javascript:;"><span class="label label-danger" title="删除"  data-id='+c.id+' onclick="del(this)">删除</span></a>';
		                    return btn;
                     }},
				],
			pager:"#pager_list_1",
			viewrecords:true,
			caption:"商品列表",
			hidegrid:false,
			jsonReader: {    //jsonReader来跟服务器端返回的数据做对应  
	           //包含实际数据的数组  
		        root: "data",  //包含实际数据的数组  
	            page: "pageInfo.pageNo",  //当前页  
	            total: "pageInfo.totalPages",//总页数  
	            records:"pageInfo.total", //查询出的记录数  
	            rowNum:"pageInfo.pageSize",
	            repeatitems : false  
	       	 },
	       	loadComplete: function (xhr) {
	       		getGoodsName();
	       	}
		});
		/* $("#table").setSelection(4,true); */
		/* $("#table").jqGrid("navGrid","#pager_list_1",{del:true,search:true},{height:200,reloadAfterSubmit:true}); */
		$(window).bind("resize",function(){
			var width=$(".jqGrid_wrapper").width();
		    $("#table").setGridWidth(width)});
		
		getCatInfo(0,"#goodsCateId");
		
		});
     
      //自定义报警列格式
        function alarmFormatter(cellvalue, options, rowdata){
            if (cellvalue != null)
                return '<img width="90" height="50" src="'+cellvalue+'" alt="' + cellvalue + '" />';
            else 
                return '<img width="90" height="50" src="../hplus/img/del.jpg" alt="' + cellvalue + '" />';
        }
        
        
        var edit=function(){
        	$("#eg").addClass("no-padding");
		    $(".click2edit").summernote({lang:"zh-CN",focus:true })};
		var save=function(){$("#eg").removeClass("no-padding");
	   var aHTML=$(".click2edit").code();$(".click2edit").destroy()};
	   
	   
		/* //查询
		 $(function(){ 
	        $("#search-btn").click(function(){ 
	            var value = escape($("#value").val()); 
	            var isAdminRecom = escape($("#isAdminRecom").val()); 
	            var isSale=escape($("#isSale").val());
	            var goodsCateId=escape($("#goodsCateId").val());
	            var goodsId=escape($("#goodsId").val());
	            $("#table").jqGrid('setGridParam',{ 
	                url:HttpUrlCommon+_goodsList, 
	                postData:{'value':value,'isAdminRecom':isAdminRecom,"isSale":isSale,"goodsCateId":goodsCateId,"goodsId":goodsId}, //发送数据 
	                page:1 
	            }).trigger("reloadGrid"); //重新载入 
	        });
	        $("#search-clear").click(function(){ 
	        	var page = $('#table').getGridParam('page'); // current page
	            var rows = $('#table').getGridParam('rows'); // rows  
	            //var sidx = $('#table').getGridParam('sidx'); // sidx
	            var sord = $('#table').getGridParam('sord'); // sord
	            $("#table").jqGrid('setGridParam',{ 
	                url:HttpUrlCommon+_goodsList,
	                postData:{'page':page,'rows':rows,'sord':sord,'value':"",'isAdminRecom':null,"isSale":null,"goodsId":null}, //发送数据 
	                page:page
	            }).trigger("reloadGrid"); //重新载入 
	            $("#value").val('');
	            $("#isAdminRecom").val('');
	            $("#isSale").val('');
	            $("#goodsCateId").val('');
	            $("#goodsId").val('')
	            //location.reload();
	        });
	    });  */
		
		//删除
		function del(a){
	    	var id=$(a).data("id");
	    	layer.confirm('确定要删除此记录吗？', function(){ 
	    		layer.closeAll('dialog');
	    		$.ajax({ url: _delGoods, data:{id:id}, success: function(data){
	    	          layer.msg(data.message);
	    	          $("#table").trigger("reloadGrid");
	    	           }
	    	          });
	    		}); 
	    }
		//获取分类名称
		function getGoodsName(){
			
			/* //拿到grid对象
			var obj = $("#table");
			//获取grid表中所有的rowid值
			var rowIds = obj.getDataIDs();
			//初始化一个数组arrayData容器，用来存放rowData
			var arrayData = new Array();
			if (rowIds.length > 0) {
			  for (var i = 0; i < rowIds.length; i++) {
			  //rowData=obj.getRowData(rowid);//这里rowid=rowIds[i];
			  arrayData.push(obj.getRowData(rowIds[i]));
			  }
			}
			console.log(arrayData); */
			var str="";
	        var obj = document.getElementById("goodsId");
			$.ajax({
			type:"post",
			async:false,
			url:_goodsList,
			success:function(data){
				
				if(data.status="200"&&data.data!=null){
					$.each(data.data, function (index, e) {
	                    obj.add(new Option(e.goodsName, e.id));
	                });
	                $("#goodsId").trigger("chosen:updated");
	                $("#goodsId").chosen();
			    	/*  for(var i=0;i<data.data.length;i++){
			    		 ghtml+='<option value="'+data.data[i].id+'" hassubinfo="true">'+data.data[i].goodsName+'</option>';
			    	 } */
				}
                
				 /* var ghtml='<select data-placeholder="商品名称..." class="chosen-select" name="goodsId" style="width:100px;" tabindex="2">';
				    ghtml+='<option value="">商品名称</option>';
				     if(data.data!=null){
				    	 for(var i=0;i<data.data.length;i++){
				    		 ghtml+='<option value="'+data.data[i].id+'" hassubinfo="true">'+data.data[i].goodsName+'</option>';
				    	 }
					}
				
				    ghtml+='</select>';
				  $("#goodsId").append(ghtml); */
			  }
			})
			
		}
		 /* $(".chosen-select").chosen({   
		     search_contains: true
		 });
		 */
		//获取分类
		function getCatInfo(id,_$id){
			var url=_getGoodsCatePageById;
			$.ajax({ 
				  type:"POST", 
				  url:url,
				  dataType:"json",
				  async:false,
				  success:function(data){ 
					  if(data.status=="200"){//goodsCateId
						  var opthtml='<option value="">选择分类</option>';
						      
							  var parent=data.data;
							  for(var i=0;i<parent.length;i++){
								 
									  opthtml+='<option value="'+parent[i].id+'">'+parent[i].catName+'</option>';
							
							  }
							  $(_$id).html(opthtml);
							  
								
					  }
				  }
			})
		}
	
    </script>
    <script src="../hplus/js/plugins/chosen/chosen.jquery.js"></script>
   <script src="../hplus/js/plugins/jsKnob/jquery.knob.js"></script>
   <script src="../hplus/js/plugins/jasny/jasny-bootstrap.min.js"></script>
    <script src="../hplus/js/plugins/datapicker/bootstrap-datepicker.js"></script>
    <script src="../hplus/js/plugins/prettyfile/bootstrap-prettyfile.js"></script>
    <script src="../hplus/js/plugins/nouslider/jquery.nouislider.min.js"></script>
    <script src="../hplus/js/plugins/switchery/switchery.js"></script>
    <script src="../hplus/js/plugins/ionRangeSlider/ion.rangeSlider.min.js"></script>
    <script src="../hplus/js/plugins/iCheck/icheck.min.js"></script>
    <script src="../hplus/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="../hplus/js/plugins/colorpicker/bootstrap-colorpicker.min.js"></script>
    <script src="../hplus/js/plugins/clockpicker/clockpicker.js"></script>
    <script src="../hplus/js/plugins/cropper/cropper.min.js"></script>
    <script src="../hplus/js/demo/form-advanced-demo.min.js"></script>
<!-- <script src="../amaze/js/amazeui.chosen.min.js"></script> -->
<!--  <script src="../amaze/chosen/docsupport/jquery-3.2.1.min.js" type="text/javascript"></script> -->
</body>
</html>