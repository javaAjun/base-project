
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <title>后台管理</title>
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="../hplus/css/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
    <link href="../hplus/css/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">
    <link href="../hplus/css/animate.min.css" rel="stylesheet">
    <link href="../hplus/css/style.min862f.css?v=4.1.0" rel="stylesheet">
    <link href="../hplus/css/plugins/jqgrid/ui.jqgridffe4.css?0820" rel="stylesheet">
    <link rel="stylesheet" href="../css/common.css">
    <script src="../hplus/js/jquery.min.js?v=2.1.4"></script>
    
</head>

<body class="fixed-sidebar full-height-layout gray-bg fixed-nav" style="overflow-x:hidden;">
<div id="top-alert" class="alert alert-danger alert-dismissable">
    <button aria-hidden="true" class="close" type="button">×</button>
    <span class="alert-content"></span>
</div>
<div style="padding: 10px;">
    
<div class="row">
    <div class="col-sm-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5 id="title"></h5>
                <div class="ibox-tools">
                    <a class="toback" href="../auth_manager/index.html">返回上一页</a>
                </div>
            </div>
            <div class="ibox-content">
                <form method="post" action="/addOreditRule" class="form-horizontal">
                    <input type="hidden" name="userId">
                                                        <div class="panel panel-default">
                                <div class="panel-heading">
                                    <label><input type="checkbox" name="urls" value="2"  class="ids1"> 管理员管理</label>
                                </div>
                                                                <div class="panel-body">
                                                                        <div>
                                        <label><input type="checkbox" name="urls" value="9"  class="ids ids2"> 管理员列表</label>
                                                                                <div style="padding: 10px 0px 10px 30px;">
                                                                                        <label><input type="checkbox" name="urls" value="/html/admin_add.html"  class="ids admin_add"> 新增/编辑 </label>
                                                                                        <label><input type="checkbox" name="urls" value="/updateAdminStatus"  class="ids updateAdminStatus"> 改变状态 </label>
                                                                                        <label><input type="checkbox" name="urls" value="/delAdmin"  class="ids delAdmin"> 删除 </label>
                                                                                    </div>
                                                                            </div>
                                                                        <div>
                                        <label><input type="checkbox" name="urls" value="10"  class="ids ids2"> 权限管理</label>
                                                                                <div style="padding: 10px 0px 10px 30px;">
                                                                                        <label><input type="checkbox" name="urls" value="/html/admin_rule.html"  class="ids admin_rule"> 访问授权 </label>
                                                                                        <label><input type="checkbox" name="urls" value="/html/updatePassword.html"  class="ids updatePassword"> 修改密码 </label>
                                                                                    </div>
                                                                            </div>
                                                                    </div>
                                                            </div>
                                                    </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-12">
                            <button class="btn btn-primary ajax-post" target-form="form-horizontal" type="submit">确 定</button>
                            <a class="btn btn-default" href="../auth_manager/index.html">取 消</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

</div>
<script src="../hplus/js/bootstrap.min.js?v=3.3.6"></script>
<script src="../hplus/js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="../hplus/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
<script src="../layer-v3.1.1/layer/layer.js"></script>
<!--<script src="../hplus/js/plugins/layer/layer.min.js"></script>-->
<script src="../hplus/js/hplus.min.js?v=4.1.0"></script>
<script src="../hplus/js/contabs.min.js"></script>
<script src="../hplus/js/plugins/pace/pace.min.js"></script>

<!-- jqGrid -->
<script src="../hplus/js/plugins/jqgrid/i18n/grid.locale-cnffe4.js?0820"></script>
<script src="../hplus/js/plugins/jqgrid/jquery.jqGrid.minffe4.js?0820"></script>
<!--<script src="../hplus/js/plugins/iCheck/icheck.min.js"></script>-->
<script src="../js/common.js"></script>

<script>
    $(document).ready(function(){
    	var url="/getPrivilegeList";
    	var userId=getQueryString("userId");
    	var data={userId:userId};
    	var groupName=getQueryString("groupName");
    	formSetValue("userId", userId);
    	$('#title').html("[ "+groupName+" ] 访问授权");
    	String.prototype.replaceAll = function(s1,s2){
    		　　return this.replace(new RegExp(s1,"gm"),s2);
    		　　}
    	$.get(url,data,function(obj){
    		console.log(obj);
    		$.each(obj, function(idx, name) {
    			name=name.replaceAll('\/html','');
    			name=name.replaceAll('.html','');
    			name=name.replaceAll('/','.');
    			$(name).prop("checked", true);
    			console.log(name);
    		});
    	});
    	
    	 $('#top-alert').find('button').click();

        //全选的实现
        $(".ids1").click(function(){
            $(this).parent().parent().parent().find(".ids").prop("checked", this.checked);
        });
        $(".ids2").click(function(){
            $(this).parent().parent().find("div .ids").prop("checked", this.checked);
        });
        $(".ids").click(function(){
        	if(!$(this).hasClass("ids2")){
        		var node = $(this);
        		var parentNode=node.parent().parent().parent();
        		var ids2=parentNode.find(".ids2");
        		var childs=node.parent().parent().find(".ids");
        		var isCheck=false;
            	for(var i=0;i<childs.length;i++){
            		if($(childs[i]).prop('checked')){
            			isCheck=true;
            			break;
            		}
            	}
            	if(isCheck==true){
            		ids2.prop("checked",true);
            	}else{
            		ids2.prop("checked",false);
            	}
        	}
//         	 .prop("checked",true);
        })
    });

</script>

</body>
</html>
